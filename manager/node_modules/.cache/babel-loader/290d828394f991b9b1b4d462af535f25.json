{"ast":null,"code":"var _jsxFileName = \"/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js\";\nimport React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass WorkItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      item: props.value,\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n    this.handleMouseHover = this.handleMouseHover.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this); // console.log(this.state.item)\n  }\n\n  handleMouseHover() {\n    this.setState(this.toggleHoverState);\n  }\n\n  handleMouseLeave() {\n    this.setState(this.toggleLeaveState);\n  }\n\n  toggleHoverState(state) {\n    return {\n      opacity: 0.5,\n      backgroundColor: '#323232'\n    };\n  }\n\n  toggleLeaveState(state) {\n    return {\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // console.log(prevProps.value)\n    this.state.item = prevProps.value;\n  }\n\n  attach() {\n    const request = async () => {\n      // alert(this.state.item.id)\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/action/attach_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_ATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  stop() {\n    const currentState = this.state.item.work_state;\n\n    if (currentState !== R.STATE_ATTACHED) {\n      alert('진행 상태가 아닐 때는 사용할 수 없습니다.');\n      return;\n    }\n\n    const request = async () => {\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/action/stop_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_STOPPED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  terminate() {\n    const currentState = this.state.item.work_state;\n\n    if (currentState !== R.STATE_STOPPED) {\n      alert('멈춤 상태가 아닐 때는 사용할 수 없습니다.');\n      return;\n    }\n\n    const request = async () => {\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/action/terminate_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_DEATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  error() {\n    this.setState({\n      value: R.STATE_ERROR\n    });\n  }\n\n  renderProgressStateTextBox() {\n    return /*#__PURE__*/_jsxDEV(ProgressStateTextBox, {\n      value: this.state.item.work_state\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonAttach() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_ATTACHED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.attach()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonStop() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_STOPPED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.stop()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonTerminate() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_TERMINATED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.terminate()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    // console.log(this.state.item.channels)\n    const secs = this.state.item.update_time;\n    var hour = \"00\";\n    var minute = \"00\";\n    var second = \"00\";\n    let timeView, controlView;\n\n    if (this.state.item.work_state === R.STATE_WAITING) {\n      controlView = /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          // float: 'right',\n          position: 'absolute',\n          top: '50%',\n          left: '86%',\n          transform: 'translate(-20%, -50%)',\n          display: 'flex'\n        },\n        children: [this.renderButtonAttach(), \"\\xA0\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.item.work_state === R.STATE_ATTACHED) {\n      const hourNum = Math.floor(secs / 3600);\n      const hourMod = secs % 3600;\n      const minuteNum = Math.floor(hourMod / 60);\n      const minuteMod = hourMod % 60;\n      hour = (hourNum < 10 ? '0' : '') + hourNum;\n      minute = (minuteNum < 10 ? '0' : '') + minuteNum;\n      second = (minuteMod < 10 ? '0' : '') + Math.floor(minuteMod);\n      timeView = /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingTop: 6,\n          paddingLeft: 20,\n          fontSize: 16,\n          color: '#aeaeae'\n        },\n        children: [\"\\uACBD\\uACFC:\\xA0\", /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            color: '#ff9e01',\n            fontSize: 16\n          },\n          children: [hour, \":\", minute, \":\", second]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 24\n      }, this);\n      controlView = /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          // float: 'right',\n          position: 'absolute',\n          top: '50%',\n          left: '86%',\n          transform: 'translate(-20%, -50%)',\n          display: 'flex'\n        },\n        children: [this.renderButtonStop(), \"\\xA0\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (this.state.item.work_state === R.STATE_STOPPED) {\n      controlView = /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          // float: 'right',\n          position: 'absolute',\n          top: '50%',\n          left: '86%',\n          transform: 'translate(-20%, -50%)',\n          display: 'flex'\n        },\n        children: [this.renderButtonTerminate(), \"\\xA0\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this);\n    }\n\n    return (\n      /*#__PURE__*/\n      // {rect}\n      _jsxDEV(\"div\", {\n        onMouseEnter: this.handleMouseHover,\n        onMouseLeave: this.handleMouseLeave,\n        onClick: e => {\n          this.props.openPopup();\n        },\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: 200,\n          backgroundColor: this.state.backgroundColor,\n          borderBottom: '1px solid black',\n          display: 'flex',\n          cursor: 'pointer'\n        },\n        children: [controlView, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '10%',\n              left: '2%',\n              display: 'flex'\n            },\n            children: [this.renderProgressStateTextBox(), timeView]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '32%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC218\\uC9D1\\uD604\\uD669: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.channels]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '47%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC218\\uC9D1\\uCC44\\uB110: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.channels]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '47%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uD0A4\\uC6CC\\uB4DC: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.keywords]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '62%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC218\\uC9D1\\uAE30\\uAC04: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.start_date, \"\\xA0~\\xA0\", this.state.item.end_date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '77%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC124\\uBA85: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), controlView]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    );\n  }\n\n}\n\nexport default WorkItem;","map":{"version":3,"sources":["/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js"],"names":["React","ProgressStateTextBox","ButtonControl","R","axios","WorkItem","Component","constructor","props","state","item","value","opacity","backgroundColor","handleMouseHover","bind","handleMouseLeave","setState","toggleHoverState","toggleLeaveState","componentDidUpdate","prevProps","prevState","snapshot","attach","request","data","id","response","post","status","alert","STATE_ATTACHED","window","location","reload","stop","currentState","work_state","STATE_STOPPED","terminate","STATE_DEATTACHED","error","STATE_ERROR","renderProgressStateTextBox","renderButtonAttach","renderButtonStop","renderButtonTerminate","STATE_TERMINATED","render","secs","update_time","hour","minute","second","timeView","controlView","STATE_WAITING","position","top","left","transform","display","hourNum","Math","floor","hourMod","minuteNum","minuteMod","paddingTop","paddingLeft","fontSize","color","e","openPopup","width","height","borderBottom","cursor","channels","keywords","start_date","end_date","title"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\n\nclass WorkItem extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            item: props.value,\n            opacity: 1.0,\n            backgroundColor: '#212121',\n        };\n        this.handleMouseHover = this.handleMouseHover.bind(this);\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\n\n        // console.log(this.state.item)\n    }\n\n    handleMouseHover() { this.setState(this.toggleHoverState); }\n    handleMouseLeave() { this.setState(this.toggleLeaveState); }\n\n    toggleHoverState(state) { return { opacity: 0.5, backgroundColor: '#323232' }; }\n    toggleLeaveState(state) { return { opacity: 1.0, backgroundColor: '#212121' }; }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // console.log(prevProps.value)\n        this.state.item = prevProps.value\n    }\n\n    attach() {\n        const request = async () => {\n            // alert(this.state.item.id)\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/action/attach_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_ATTACHED } )\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    stop() {\n\n        const currentState = this.state.item.work_state;\n        if(currentState !== R.STATE_ATTACHED) {\n            alert('진행 상태가 아닐 때는 사용할 수 없습니다.');\n            return;\n        }\n\n        const request = async () => {\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/action/stop_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_STOPPED } );\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    terminate() {\n\n        const currentState = this.state.item.work_state;\n        if(currentState !== R.STATE_STOPPED) {\n            alert('멈춤 상태가 아닐 때는 사용할 수 없습니다.');\n            return;\n        }\n\n        const request = async () => {\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/action/terminate_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_DEATTACHED } );\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    error() { this.setState( { value: R.STATE_ERROR } ) }\n\n    renderProgressStateTextBox() {\n        return <ProgressStateTextBox\n            value={this.state.item.work_state}\n        />;\n    }\n\n    renderButtonAttach() {\n        return <ButtonControl\n            value={ R.STATE_ATTACHED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.attach()}\n        />\n    }\n\n    renderButtonStop() {\n        return <ButtonControl\n            value={ R.STATE_STOPPED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.stop()}\n        />\n    }\n\n    renderButtonTerminate() {\n        return <ButtonControl\n            value={ R.STATE_TERMINATED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.terminate()}\n        />\n    }\n\n\n    render() {\n\n        // console.log(this.state.item.channels)\n        const secs = this.state.item.update_time;\n        var hour   = \"00\"\n        var minute = \"00\"\n        var second = \"00\"\n        let timeView, controlView\n        if (this.state.item.work_state === R.STATE_WAITING) {\n            controlView =\n                <div style={{\n                        // float: 'right',\n                        position: 'absolute',\n                        top: '50%',\n                        left: '86%',\n                        transform: 'translate(-20%, -50%)',\n                        display: 'flex',\n                    }}>\n                    {this.renderButtonAttach()}&nbsp;&nbsp;\n                </div>\n        }\n\n        if (this.state.item.work_state === R.STATE_ATTACHED) {\n\n            const hourNum = Math.floor(secs / 3600);\n            const hourMod = secs % 3600;\n            const minuteNum = Math.floor(hourMod / 60);\n            const minuteMod = hourMod % 60;\n\n            hour   = (hourNum < 10 ? '0':'') + hourNum;\n            minute = (minuteNum < 10 ? '0':'') + minuteNum;\n            second = (minuteMod < 10 ? '0':'') + Math.floor(minuteMod);\n\n            timeView = <div style={{ paddingTop:6, paddingLeft: 20, fontSize:16, color: '#aeaeae' }}>\n                경과:&nbsp;<label style={{color:'#ff9e01', fontSize:16}}>{hour}:{minute}:{second}</label>\n                {/*&nbsp;&nbsp;/&nbsp;&nbsp;*/}\n                {/*완료:&nbsp;&nbsp;<label style={{color:'#a9d18e', fontSize:18}}>{this.state.item.current_work_count}</label>*/}\n                {/*&nbsp;건&nbsp;(총&nbsp;*/}\n                {/*<label style={{color:'#0099ff', fontSize:18}}>{this.state.item.total_work_count}</label>건)&nbsp;*/}\n            </div>\n\n            controlView =\n                <div style={{\n                        // float: 'right',\n                        position: 'absolute',\n                        top: '50%',\n                        left: '86%',\n                        transform: 'translate(-20%, -50%)',\n                        display: 'flex',\n                    }}>\n                    {this.renderButtonStop()}&nbsp;&nbsp;\n                </div>\n        }\n\n        if (this.state.item.work_state === R.STATE_STOPPED) {\n            controlView =\n                <div style={{\n                    // float: 'right',\n                    position: 'absolute',\n                    top: '50%',\n                    left: '86%',\n                    transform: 'translate(-20%, -50%)',\n                    display: 'flex',\n                }}>\n                    {this.renderButtonTerminate()}&nbsp;&nbsp;\n                </div>\n        }\n\n        return (\n            // {rect}\n        <div\n            onMouseEnter={this.handleMouseHover}\n            onMouseLeave={this.handleMouseLeave}\n            onClick={(e) => {\n                this.props.openPopup();\n            }}\n            style={{\n                position: 'relative',\n                width: '100%',\n                height:200,\n                backgroundColor: this.state.backgroundColor,\n                borderBottom: '1px solid black',\n                display: 'flex',\n                cursor: 'pointer',\n                }}\n        >\n            {controlView}\n            <div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'10%',\n                        left: '2%',\n                        display: 'flex'\n                    }}>\n                    {this.renderProgressStateTextBox()}\n                    {timeView}\n\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'32%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집현황: </font>\n                    &nbsp;&nbsp;{this.state.item.channels}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'47%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집채널: </font>\n                    &nbsp;&nbsp;{this.state.item.channels}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'47%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>키워드: </font>\n                    &nbsp;&nbsp;{this.state.item.keywords}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'62%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집기간: </font>\n                    &nbsp;&nbsp;{this.state.item.start_date}&nbsp;~&nbsp;{this.state.item.end_date}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'77%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>설명: </font>\n                    &nbsp;&nbsp;{this.state.item.title}\n                </div>\n            </div>\n            {controlView}\n\n\n\n        </div>\n        );\n    }\n}\n\nexport default WorkItem;"]},"metadata":{},"sourceType":"module"}