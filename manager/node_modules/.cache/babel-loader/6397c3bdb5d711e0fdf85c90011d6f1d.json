{"ast":null,"code":"var _jsxFileName = \"/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js\";\nimport React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass WorkItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      item: props.value,\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n    this.handleMouseHover = this.handleMouseHover.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this); // console.log(this.state.item)\n  }\n\n  handleMouseHover() {\n    this.setState(this.toggleHoverState);\n  }\n\n  handleMouseLeave() {\n    this.setState(this.toggleLeaveState);\n  }\n\n  toggleHoverState(state) {\n    return {\n      opacity: 0.5,\n      backgroundColor: '#323232'\n    };\n  }\n\n  toggleLeaveState(state) {\n    return {\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(prevProps.value);\n    this.state.item = prevProps.value;\n  }\n\n  attach() {\n    const request = async () => {\n      // alert(this.state.item.id)\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/action/attach_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_ATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  terminate() {\n    const currentState = this.state.item.work_state;\n\n    if (currentState !== 'attached') {\n      alert('진행 상태가 아닐 때는 사용할 수 없습니다.');\n      return;\n    }\n\n    const request = async () => {\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/terminate_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_DEATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  error() {\n    this.setState({\n      value: R.STATE_ERROR\n    });\n  }\n\n  renderProgressStateTextBox() {\n    return /*#__PURE__*/_jsxDEV(ProgressStateTextBox, {\n      value: this.state.item.work_state\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonAttach() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_ATTACHED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.attach()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonTerminate() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_TERMINATED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.terminate()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    // console.log(this.state.item.channels)\n    const secs = this.state.item.update_time;\n    var hour = \"00\";\n    var minute = \"00\";\n    var second = \"00\";\n\n    if (this.state.item.work_state !== R.STATE_WAITING) {\n      const hourNum = Math.floor(secs / 3600);\n      const hourMod = secs % 3600;\n      const minuteNum = Math.floor(hourMod / 60);\n      const minuteMod = hourMod % 60;\n      hour = (hourNum < 10 ? '0' : '') + hourNum;\n      minute = (minuteNum < 10 ? '0' : '') + minuteNum;\n      second = (minuteMod < 10 ? '0' : '') + Math.floor(minuteMod);\n    }\n\n    const rect = /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"\\u314B\\u314B\\u314B\\u314B\", this.renderButtonAttach(), \"\\xA0\\xA0\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this);\n\n    return (\n      /*#__PURE__*/\n      // {rect}\n      _jsxDEV(\"div\", {\n        onMouseEnter: this.handleMouseHover,\n        onMouseLeave: this.handleMouseLeave,\n        onClick: e => {\n          this.props.openPopup();\n        },\n        style: {\n          position: 'relative',\n          width: '100%',\n          height: 200,\n          backgroundColor: this.state.backgroundColor,\n          borderBottom: '1px solid black',\n          display: 'flex',\n          cursor: 'pointer'\n        },\n        children: [rect, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '10%',\n              left: '2%',\n              display: 'flex'\n            },\n            children: [this.renderProgressStateTextBox(), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 6,\n                paddingLeft: 20,\n                fontSize: 16,\n                color: '#aeaeae'\n              },\n              children: [\"\\uACBD\\uACFC:\\xA0\", /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  color: '#ff9e01',\n                  fontSize: 16\n                },\n                children: [hour, \":\", minute, \":\", second]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '32%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC218\\uC9D1\\uCC44\\uB110: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.channels]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '47%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uD0A4\\uC6CC\\uB4DC: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.keywords]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '62%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC218\\uC9D1\\uAE30\\uAC04: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.start_date, \"\\xA0~\\xA0\", this.state.item.end_date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '77%',\n              left: '2%',\n              display: 'flex',\n              fontSize: '12pt'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"font\", {\n              color: \"#aeaeae\",\n              children: \"\\uC124\\uBA85: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 21\n            }, this), \"\\xA0\\xA0\", this.state.item.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            // float: 'right',\n            position: 'absolute',\n            top: '50%',\n            left: '86%',\n            transform: 'translate(-20%, -50%)',\n            display: 'flex'\n          },\n          children: [this.renderButtonAttach(), \"\\xA0\\xA0\", this.renderButtonTerminate(), \"\\xA0\\xA0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    );\n  }\n\n}\n\nexport default WorkItem;","map":{"version":3,"sources":["/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js"],"names":["React","ProgressStateTextBox","ButtonControl","R","axios","WorkItem","Component","constructor","props","state","item","value","opacity","backgroundColor","handleMouseHover","bind","handleMouseLeave","setState","toggleHoverState","toggleLeaveState","componentDidUpdate","prevProps","prevState","snapshot","console","log","attach","request","data","id","response","post","status","alert","STATE_ATTACHED","window","location","reload","terminate","currentState","work_state","STATE_DEATTACHED","error","STATE_ERROR","renderProgressStateTextBox","renderButtonAttach","renderButtonTerminate","STATE_TERMINATED","render","secs","update_time","hour","minute","second","STATE_WAITING","hourNum","Math","floor","hourMod","minuteNum","minuteMod","rect","e","openPopup","position","width","height","borderBottom","display","cursor","top","left","paddingTop","paddingLeft","fontSize","color","channels","keywords","start_date","end_date","title","transform"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\n\nclass WorkItem extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            item: props.value,\n            opacity: 1.0,\n            backgroundColor: '#212121',\n        };\n        this.handleMouseHover = this.handleMouseHover.bind(this);\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\n\n        // console.log(this.state.item)\n    }\n\n    handleMouseHover() { this.setState(this.toggleHoverState); }\n    handleMouseLeave() { this.setState(this.toggleLeaveState); }\n\n    toggleHoverState(state) { return { opacity: 0.5, backgroundColor: '#323232' }; }\n    toggleLeaveState(state) { return { opacity: 1.0, backgroundColor: '#212121' }; }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        console.log(prevProps.value)\n        this.state.item = prevProps.value\n    }\n\n    attach() {\n        const request = async () => {\n            // alert(this.state.item.id)\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/action/attach_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_ATTACHED } )\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    terminate() {\n\n        const currentState = this.state.item.work_state;\n        if(currentState !== 'attached') {\n            alert('진행 상태가 아닐 때는 사용할 수 없습니다.');\n            return;\n        }\n\n        const request = async () => {\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/terminate_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_DEATTACHED } );\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    error() { this.setState( { value: R.STATE_ERROR } ) }\n\n    renderProgressStateTextBox() {\n        return <ProgressStateTextBox\n            value={this.state.item.work_state}\n        />;\n    }\n\n    renderButtonAttach() {\n        return <ButtonControl\n            value={ R.STATE_ATTACHED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.attach()}\n        />\n    }\n\n    renderButtonTerminate() {\n        return <ButtonControl\n            value={ R.STATE_TERMINATED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.terminate()}\n        />\n    }\n\n\n    render() {\n\n        // console.log(this.state.item.channels)\n        const secs = this.state.item.update_time;\n        var hour   = \"00\"\n        var minute = \"00\"\n        var second = \"00\"\n        if (this.state.item.work_state !== R.STATE_WAITING) {\n            const hourNum = Math.floor(secs / 3600);\n            const hourMod = secs % 3600;\n            const minuteNum = Math.floor(hourMod / 60);\n            const minuteMod = hourMod % 60;\n\n            hour   = (hourNum < 10 ? '0':'') + hourNum;\n            minute = (minuteNum < 10 ? '0':'') + minuteNum;\n            second = (minuteMod < 10 ? '0':'') + Math.floor(minuteMod);\n        }\n\n        const rect =\n            <div>ㅋㅋㅋㅋ\n                {this.renderButtonAttach()}&nbsp;&nbsp;\n            </div>\n\n        return (\n            // {rect}\n        <div\n            onMouseEnter={this.handleMouseHover}\n            onMouseLeave={this.handleMouseLeave}\n            onClick={(e) => {\n                this.props.openPopup();\n            }}\n            style={{\n                position: 'relative',\n                width: '100%',\n                height:200,\n                backgroundColor: this.state.backgroundColor,\n                borderBottom: '1px solid black',\n                display: 'flex',\n                cursor: 'pointer',\n                }}\n        >\n            {rect}\n            <div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'10%',\n                        left: '2%',\n                        display: 'flex'\n                    }}>\n                    {this.renderProgressStateTextBox()}\n                    <div style={{ paddingTop:6, paddingLeft: 20, fontSize:16, color: '#aeaeae' }}>\n                        경과:&nbsp;<label style={{color:'#ff9e01', fontSize:16}}>{hour}:{minute}:{second}</label>\n                        {/*&nbsp;&nbsp;/&nbsp;&nbsp;*/}\n                        {/*완료:&nbsp;&nbsp;<label style={{color:'#a9d18e', fontSize:18}}>{this.state.item.current_work_count}</label>*/}\n                        {/*&nbsp;건&nbsp;(총&nbsp;*/}\n                        {/*<label style={{color:'#0099ff', fontSize:18}}>{this.state.item.total_work_count}</label>건)&nbsp;*/}\n                    </div>\n\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'32%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집채널: </font>\n                    &nbsp;&nbsp;{this.state.item.channels}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'47%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>키워드: </font>\n                    &nbsp;&nbsp;{this.state.item.keywords}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'62%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집기간: </font>\n                    &nbsp;&nbsp;{this.state.item.start_date}&nbsp;~&nbsp;{this.state.item.end_date}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'77%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>설명: </font>\n                    &nbsp;&nbsp;{this.state.item.title}\n                </div>\n            </div>\n            <div\n                style={{\n                    // float: 'right',\n                    position: 'absolute',\n                    top: '50%',\n                    left: '86%',\n                    transform: 'translate(-20%, -50%)',\n                    display: 'flex',\n                }}\n            >\n                {this.renderButtonAttach()}&nbsp;&nbsp;\n                {/*{this.renderButtonPause()}&nbsp;&nbsp;*/}\n                {this.renderButtonTerminate()}&nbsp;&nbsp;\n                {/*{this.renderButtonTerminate()}*/}\n\n            </div>\n\n\n        </div>\n        );\n    }\n}\n\nexport default WorkItem;"]},"metadata":{},"sourceType":"module"}