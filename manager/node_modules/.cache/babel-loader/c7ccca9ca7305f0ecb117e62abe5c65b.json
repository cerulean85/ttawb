{"ast":null,"code":"var _jsxFileName = \"/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js\";\nimport React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass WorkItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      item: props.value,\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n    this.handleMouseHover = this.handleMouseHover.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this); // console.log(this.state.item)\n  }\n\n  handleMouseHover() {\n    this.setState(this.toggleHoverState);\n  }\n\n  handleMouseLeave() {\n    this.setState(this.toggleLeaveState);\n  }\n\n  toggleHoverState(state) {\n    return {\n      opacity: 0.5,\n      backgroundColor: '#323232'\n    };\n  }\n\n  toggleLeaveState(state) {\n    return {\n      opacity: 1.0,\n      backgroundColor: '#212121'\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(prevProps.value);\n    this.state.item = prevProps.value;\n  }\n\n  attach() {\n    const request = async () => {\n      // alert(this.state.item.id)\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/action/attach_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_ATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  deattach() {\n    const currentState = this.state.item.work_state;\n\n    if (currentState !== 'processing') {\n      alert('수집이 진행 상태가 아닐 때는 사용할 수 없습니다.');\n      return;\n    }\n\n    const request = async () => {\n      let data = {\n        id: this.state.item.id\n      };\n      const response = await axios.post('http://localhost:3001/deattach_work', data);\n\n      if (response.status !== 200) {\n        alert('요청한 작업을 수행할 수 없습니다.');\n      } else {\n        // alert('처리되었습니다.');\n        this.setState({\n          value: R.STATE_DEATTACHED\n        });\n        window.location.reload();\n      }\n    };\n\n    request();\n  }\n\n  error() {\n    this.setState({\n      value: R.STATE_ERROR\n    });\n  }\n\n  renderProgressStateTextBox() {\n    return /*#__PURE__*/_jsxDEV(ProgressStateTextBox, {\n      value: this.state.item.work_state\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonAttach() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_ATTACHED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.attach()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  }\n\n  renderButtonDeattach() {\n    return /*#__PURE__*/_jsxDEV(ButtonControl, {\n      value: R.STATE_DEATTACHED,\n      workState: this.state.item.work_state,\n      groupdId: this.state.item.id,\n      onClick: () => this.deattach()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    // console.log(this.state.item.channels)\n    const secs = this.state.item.update_time;\n    var hour = \"00\";\n    var minute = \"00\";\n    var second = \"00\";\n\n    if (this.state.item.work_state !== R.STATE_WAITING) {\n      const hourNum = Math.floor(secs / 3600);\n      const hourMod = secs % 3600;\n      const minuteNum = Math.floor(hourMod / 60);\n      const minuteMod = hourMod % 60;\n      hour = (hourNum < 10 ? '0' : '') + hourNum;\n      minute = (minuteNum < 10 ? '0' : '') + minuteNum;\n      second = (minuteMod < 10 ? '0' : '') + Math.floor(minuteMod);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onMouseEnter: this.handleMouseHover,\n      onMouseLeave: this.handleMouseLeave,\n      onClick: e => {\n        this.props.openPopup();\n      },\n      style: {\n        position: 'relative',\n        width: '100%',\n        height: 200,\n        backgroundColor: this.state.backgroundColor,\n        borderBottom: '1px solid black',\n        display: 'flex',\n        cursor: 'pointer'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '10%',\n            left: '2%' // display: 'flex'\n\n          },\n          children: [this.renderProgressStateTextBox(), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingTop: 6,\n              paddingLeft: 20,\n              fontSize: 16,\n              color: '#aeaeae'\n            },\n            children: [\"\\uACBD\\uACFC:\\xA0\", /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                color: '#ff9e01',\n                fontSize: 16\n              },\n              children: [hour, \":\", minute, \":\", second]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingTop: 6,\n              paddingLeft: 20,\n              fontSize: 16,\n              color: '#aeaeae'\n            },\n            children: [\"\\uACBD\\uACFC:\\xA0\", /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                color: '#ff9e01',\n                fontSize: 16\n              },\n              children: [hour, \":\", minute, \":\", second]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '32%',\n            left: '2%',\n            display: 'flex',\n            fontSize: '12pt'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"font\", {\n            color: \"#aeaeae\",\n            children: \"\\uC218\\uC9D1\\uCC44\\uB110: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 21\n          }, this), \"\\xA0\\xA0\", this.state.item.channels]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '47%',\n            left: '2%',\n            display: 'flex',\n            fontSize: '12pt'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"font\", {\n            color: \"#aeaeae\",\n            children: \"\\uD0A4\\uC6CC\\uB4DC: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }, this), \"\\xA0\\xA0\", this.state.item.keywords]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '62%',\n            left: '2%',\n            display: 'flex',\n            fontSize: '12pt'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"font\", {\n            color: \"#aeaeae\",\n            children: \"\\uC218\\uC9D1\\uAE30\\uAC04: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), \"\\xA0\\xA0\", this.state.item.start_date, \"\\xA0~\\xA0\", this.state.item.end_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: '77%',\n            left: '2%',\n            display: 'flex',\n            fontSize: '12pt'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"font\", {\n            color: \"#aeaeae\",\n            children: \"\\uC124\\uBA85: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 21\n          }, this), \"\\xA0\\xA0\", this.state.item.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          // float: 'right',\n          position: 'absolute',\n          top: '50%',\n          left: '86%',\n          transform: 'translate(-20%, -50%)',\n          display: 'flex'\n        },\n        children: [this.renderButtonAttach(), \"\\xA0\\xA0\", this.renderButtonDeattach(), \"\\xA0\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default WorkItem;","map":{"version":3,"sources":["/home/zhkim/github/whateverdot/whateverdot/manager/src/components/WorkItem.js"],"names":["React","ProgressStateTextBox","ButtonControl","R","axios","WorkItem","Component","constructor","props","state","item","value","opacity","backgroundColor","handleMouseHover","bind","handleMouseLeave","setState","toggleHoverState","toggleLeaveState","componentDidUpdate","prevProps","prevState","snapshot","console","log","attach","request","data","id","response","post","status","alert","STATE_ATTACHED","window","location","reload","deattach","currentState","work_state","STATE_DEATTACHED","error","STATE_ERROR","renderProgressStateTextBox","renderButtonAttach","renderButtonDeattach","render","secs","update_time","hour","minute","second","STATE_WAITING","hourNum","Math","floor","hourMod","minuteNum","minuteMod","e","openPopup","position","width","height","borderBottom","display","cursor","top","left","paddingTop","paddingLeft","fontSize","color","channels","keywords","start_date","end_date","title","transform"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ProgressStateTextBox from \"./ProgressStateTextBox\";\nimport ButtonControl from \"./ButtonControl\";\nimport * as R from \"../Resources\";\nimport axios from \"axios\";\n\nclass WorkItem extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            item: props.value,\n            opacity: 1.0,\n            backgroundColor: '#212121',\n        };\n        this.handleMouseHover = this.handleMouseHover.bind(this);\n        this.handleMouseLeave = this.handleMouseLeave.bind(this);\n\n        // console.log(this.state.item)\n    }\n\n    handleMouseHover() { this.setState(this.toggleHoverState); }\n    handleMouseLeave() { this.setState(this.toggleLeaveState); }\n\n    toggleHoverState(state) { return { opacity: 0.5, backgroundColor: '#323232' }; }\n    toggleLeaveState(state) { return { opacity: 1.0, backgroundColor: '#212121' }; }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        console.log(prevProps.value)\n        this.state.item = prevProps.value\n    }\n\n    attach() {\n        const request = async () => {\n            // alert(this.state.item.id)\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/action/attach_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_ATTACHED } )\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    deattach() {\n\n        const currentState = this.state.item.work_state;\n        if(currentState !== 'processing') {\n            alert('수집이 진행 상태가 아닐 때는 사용할 수 없습니다.');\n            return;\n        }\n\n        const request = async () => {\n            let data = { id: this.state.item.id };\n            const response = await axios.post('http://localhost:3001/deattach_work', data);\n            if (response.status !== 200) {\n                alert('요청한 작업을 수행할 수 없습니다.');\n            } else {\n                // alert('처리되었습니다.');\n                this.setState( { value: R.STATE_DEATTACHED } );\n                window.location.reload();\n            }\n        };\n        request()\n    }\n\n    error() { this.setState( { value: R.STATE_ERROR } ) }\n\n    renderProgressStateTextBox() {\n        return <ProgressStateTextBox\n            value={this.state.item.work_state}\n        />;\n    }\n\n    renderButtonAttach() {\n        return <ButtonControl\n            value={ R.STATE_ATTACHED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.attach()}\n        />\n    }\n\n    renderButtonDeattach() {\n        return <ButtonControl\n            value={ R.STATE_DEATTACHED }\n            workState = {this.state.item.work_state}\n            groupdId = {this.state.item.id}\n            onClick={()=> this.deattach()}\n        />\n    }\n\n\n    render() {\n\n        // console.log(this.state.item.channels)\n        const secs = this.state.item.update_time;\n        var hour   = \"00\"\n        var minute = \"00\"\n        var second = \"00\"\n        if (this.state.item.work_state !== R.STATE_WAITING) {\n            const hourNum = Math.floor(secs / 3600);\n            const hourMod = secs % 3600;\n            const minuteNum = Math.floor(hourMod / 60);\n            const minuteMod = hourMod % 60;\n\n            hour   = (hourNum < 10 ? '0':'') + hourNum;\n            minute = (minuteNum < 10 ? '0':'') + minuteNum;\n            second = (minuteMod < 10 ? '0':'') + Math.floor(minuteMod);\n        }\n\n        return (\n        <div\n            onMouseEnter={this.handleMouseHover}\n            onMouseLeave={this.handleMouseLeave}\n            onClick={(e) => {\n                this.props.openPopup();\n            }}\n            style={{\n                position: 'relative',\n                width: '100%',\n                height:200,\n                backgroundColor: this.state.backgroundColor,\n                borderBottom: '1px solid black',\n                display: 'flex',\n                cursor: 'pointer',\n                }}\n        >\n            <div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'10%',\n                        left: '2%',\n                        // display: 'flex'\n                    }}>\n                    {this.renderProgressStateTextBox()}\n                    <div style={{ paddingTop:6, paddingLeft: 20, fontSize:16, color: '#aeaeae' }}>\n                        경과:&nbsp;<label style={{color:'#ff9e01', fontSize:16}}>{hour}:{minute}:{second}</label>\n                        {/*&nbsp;&nbsp;/&nbsp;&nbsp;*/}\n                        {/*완료:&nbsp;&nbsp;<label style={{color:'#a9d18e', fontSize:18}}>{this.state.item.current_work_count}</label>*/}\n                        {/*&nbsp;건&nbsp;(총&nbsp;*/}\n                        {/*<label style={{color:'#0099ff', fontSize:18}}>{this.state.item.total_work_count}</label>건)&nbsp;*/}\n                    </div>\n                    <div style={{ paddingTop:6, paddingLeft: 20, fontSize:16, color: '#aeaeae' }}>\n                        경과:&nbsp;<label style={{color:'#ff9e01', fontSize:16}}>{hour}:{minute}:{second}</label>\n                        {/*&nbsp;&nbsp;/&nbsp;&nbsp;*/}\n                        {/*완료:&nbsp;&nbsp;<label style={{color:'#a9d18e', fontSize:18}}>{this.state.item.current_work_count}</label>*/}\n                        {/*&nbsp;건&nbsp;(총&nbsp;*/}\n                        {/*<label style={{color:'#0099ff', fontSize:18}}>{this.state.item.total_work_count}</label>건)&nbsp;*/}\n                    </div>\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'32%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집채널: </font>\n                    &nbsp;&nbsp;{this.state.item.channels}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'47%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>키워드: </font>\n                    &nbsp;&nbsp;{this.state.item.keywords}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'62%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>수집기간: </font>\n                    &nbsp;&nbsp;{this.state.item.start_date}&nbsp;~&nbsp;{this.state.item.end_date}\n                </div>\n                <div\n                    style={{\n                        position: 'absolute',\n                        top:'77%',\n                        left: '2%',\n                        display: 'flex',\n                        fontSize: '12pt'\n                    }}>\n                    <font color={\"#aeaeae\"}>설명: </font>\n                    &nbsp;&nbsp;{this.state.item.title}\n                </div>\n            </div>\n            <div\n                style={{\n                    // float: 'right',\n                    position: 'absolute',\n                    top: '50%',\n                    left: '86%',\n                    transform: 'translate(-20%, -50%)',\n                    display: 'flex',\n                }}\n            >\n                {this.renderButtonAttach()}&nbsp;&nbsp;\n                {/*{this.renderButtonPause()}&nbsp;&nbsp;*/}\n                {this.renderButtonDeattach()}&nbsp;&nbsp;\n                {/*{this.renderButtonTerminate()}*/}\n\n            </div>\n\n\n        </div>\n        );\n    }\n}\n\nexport default WorkItem;"]},"metadata":{},"sourceType":"module"}